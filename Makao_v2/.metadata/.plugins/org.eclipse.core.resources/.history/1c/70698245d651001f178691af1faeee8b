package server;

import shared.Card;
import shared.CardStack;
import shared.Request;

public class RequestsQueue {

	private CardStack stack = null;
	private Request incomming = null;
	private Request generated = null;
	public void setCards(CardStack stack)
	{
		this.stack = stack;
	}

	public void setPlayerRequest(Request request)
	{
	    incomming = request;	
	}
	public void generateRequest() {
		if (stack!=null)
		{
			if (incomming!=null)
			{
				if (incomming.getID()==Request.REQUEST_CARD_NAME || incomming.getID()==Request.REQUEST_CARD_SUIT)
				generated = incomming;
				if (incomming.getID() == Request.REQUEST_TAKE)
				{
					
				}
				//put.(generated,1);
			}
			Card card = stack.getArray()[stack.getCount()-1];
			if (lastOutgoingRequest.getID()==Request.REQUEST_TAKE)
			{
				//on the stack is the same card as previously - so me had to take a card 
				
			}
			else 
			{			    
			    if (card.getName().equals(Card.Name.FOUR))
			    {
			    	generated = new Request(Request.REQUEST_CARD_NAME,Card.Name.FOUR);
			    }
			    else 
			    	if (card.getName().equals(Card.Name.TWO))
				    {
			    		generated = new Request(Request.REQUEST_CARD_NAME,Card.Name.TWO);
				    }
			    	else 
			    		if (card.getName().equals(Card.Name.THREE))
					    {
			    			generated = new Request(Request.REQUEST_CARD_NAME,Card.Name.THREE);
					    }
			    		else 
			    			if (card.getName().equals(Card.Name.KING) && card.getSuit().equals(Card.Suit.HEART))
						    {
			    				generated = new Request(Request.REQUEST_CARD_NAME,new Object[]{Card.Suit.SPADE,Request.ARG_NEXT});
						    }
			    			else 
			    				if (card.getName().equals(Card.Name.KING) && card.getSuit().equals(Card.Suit.SPADE))
							    {
			    					generated = new Request(Request.REQUEST_CARD_NAME,new Object[]{Card.Suit.HEART,Request.ARG_PREVIOUS});
							    }
			}
		}
	}

	public Request getRequest() {
		// TODO Auto-generated method stub
		return generated;
	}

}
